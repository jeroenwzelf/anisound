<!DOCTYPE>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" type="image/png" href="images/logo/logo_medium.png">
    <title>AniSound</title>

    <style type="text/css">
      body {
		width: 100%;
		height: 100%;
        margin: 0;
        font-family: Arial;
        font-size: 16px;
      }

      #map {
		width: 100%;
		height: calc(100% - 52px);
      }
    </style>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhjEZgjkFvvD2Yvf099m5qtvipcm79ays&callback=initialize"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>	<!-- jquery for event propagation -->
	<!-- Load an icon library to show a hamburger menu (bars) on small screens -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<!-- anisound scripts -->
    <script type="text/javascript" src="sampledata/xeno-canto_sample.json"></script>
    <script type="text/javascript" src="js/markerclusterer.js"></script>
    <script type="text/javascript" src="js/speciesfilter.js"></script>
    <script type="text/javascript" src="js/styledMap.js"></script>
	<link rel="stylesheet" type="text/css" href="cs/style.css">

    <script type="text/javascript">
    	var loaded = 0;
    	function wait_for_loading() {
    		loaded++;
    		if (loaded == 3) init();
    	}

		function init() {
			init_map(getStyledMap());
			document.getElementById("colordiv_birds").style.borderLeftColor = getSpeciesColor("birds");
			document.getElementById("colordiv_felines").style.borderLeftColor = getSpeciesColor("felines");
			document.getElementById("colordiv_primates").style.borderLeftColor = getSpeciesColor("primates");
		}

		function filter_clicked_birds(cb) {
			filter_clicked_birds_(cb);
		}
		function filter_clicked_felines(cb) {
			filter_clicked_felines_(cb);
		}
		function filter_clicked_primates(cb) {
			filter_clicked_primates_(cb);
		}
    </script>
</head>
<body>
	<img id="birds" src="images/markers/animals/birds.png" style="display:none" onload="wait_for_loading()">
    <img id="felines" src="images/markers/animals/felines.png" style="display:none" onload="wait_for_loading()">
    <img id="primates" src="images/markers/animals/primates.png" style="display:none" onload="wait_for_loading()">
	<!-- Sidebar -->
	<div class="w3-sidebar w3-bar-block filter_closed" id="speciesfilter">
		<button id="closeSpeciesFilterButton" class="w3-bar-item w3-button w3-large">Close &times;</button>
		<div style="padding: 5px 30px">
			<div style="border-left: 6px solid black; padding: 0px 15px" id = colordiv_birds>
				<label for="cbx1" class="label-cbx">
					<input id="cbx1" type="checkbox" onclick="filter_clicked_birds(this)" class="invisible" checked>
					<div class="checkbox">
						<svg width="60px" height="60px" viewBox="0 0 20 20">
							<path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
							<polyline points="4 11 8 15 16 6"></polyline>
						</svg>
					</div>
					<div class="cbxlabel">Birds</div>
				</label>
			</div>
		</div>

		<div style="padding: 5px 30px">
			<div style="border-left: 6px solid black; padding: 0px 15px" id = colordiv_felines>
				<label for="cbx2" class="label-cbx">
					<input id="cbx2" type="checkbox" onclick="filter_clicked_felines(this)" class="invisible" checked>
					<div class="checkbox">
						<svg width="60px" height="60px" viewBox="0 0 20 20">
							<path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
							<polyline points="4 11 8 15 16 6"></polyline>
						</svg>
					</div>
					<div class="cbxlabel">Felines</div>
				</label>
			</div>
		</div>

		<div style="padding: 5px 30px">
			<div style="border-left: 6px solid black; padding: 0px 15px" id = colordiv_primates>
				<label for="cbx3" class="label-cbx">
					<input id="cbx3" type="checkbox" onclick="filter_clicked_primates(this)" class="invisible" checked>
					<div class="checkbox">
						<svg width="60px" height="60px" viewBox="0 0 20 20">
							<path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
							<polyline points="4 11 8 15 16 6"></polyline>
						</svg>
					</div>
					<div class="cbxlabel">Primates</div>
				</label>
			</div>
		  </div>
	</div>
	<div class="topnav" id="myTopnav">
		<!-- <a id="openSpeciesFilterButton" href="javascript:void(0);" class="icon">
			<i class="fa fa-bars"></i>
			<span class="HideOnSmall" style="">Species filter</span>
		</a> -->
		<div style="flex: auto;">
		</div>
		<a id="clearSearchIcon" style="background-color: #333 !important;" href="javascript:void(0)">
			<span class="HideOnMicro">&times;</span>
		</a>
		<input class="HideOnMicro" style="height: 40px; width: 190px; display: block;" type="text" id="searchbar" placeholder="Search.." title="Type in a name">
		<a id="openAboutButton" style="float: right;" href="javascript:void(0)">
			<img src="images/logo/logo_medium_border.png" height="48">
		</a>
	</div>
	<div id="map"></div>
	<div id="popUp" class="popUpClosed">
	    <div id="close" class="close"><i class="fa fa-times"></i></div>
	    <div id="new"><span>ABOUT</span></div>
	    <h2><strong>Ani-Sound</strong> is a <a title="Leiden University Website" href="https://www.universiteitleiden.nl/en"><em>Leiden University</em></a> project that Interactive Information Displays. This application visualizes animal data from the online database <a title="Xeno-canto Website" href="https://www.xeno-canto.org/about/xeno-canto"><em>Xeno-canto</em></a> in a topographical way.<br/><br/></h2>
	    <h2 style="font-size: 11px !important; margin-top: 10px !important;">This project has been written in <em>HTML+JavaScript</em> and is available as open-source software on its GitHub page.</h2><br>
	    <div style="display: flex; flex-flow: row; padding: 5px;">
	  		<p style="margin: -6px 0 0 10px; color: silver; font-size: 12px;">Arianna Freni </br> Jeroen Donkers</p>
	  		<div style="flex: auto"></div>
	  		<p style="margin: -6px 0 0 10px; color: silver; font-size: 12px;"></br>AniSound: v2.3.0</p>
	  	</div>
	    <a href="https://github.com/jeroenwzelf/anisound" target="_blank" class="aboutbutton">Visit Page</a>
  	</div>
	</body>

	<!-- Opening and closing windows (species filter, about popup) -->
	<script type="text/javascript">
		$("#clearSearchIcon").click(function(e) {
			var searchbar = document.getElementById("searchbar");
			searchbar.value = '';
			markerCluster.filterOnString('');
		});

		$("#searchbar").keyup(function(e) {
		    markerCluster.filterOnString(this.value.toLowerCase());
		    $("#popUp").addClass("popUpClosed");
		    $('#speciesfilter').addClass('filter_closed');
			$('#speciesfilter').removeClass('filter_open');
		    e.stopPropagation();
		});

		$("#searchbar").click(function(e) {
			$("#popUp").addClass("popUpClosed");
		    $('#speciesfilter').addClass('filter_closed');
			$('#speciesfilter').removeClass('filter_open');
		    e.stopPropagation();
		});

		$("#openAboutButton").click(function(e) {
			$("#popUp").removeClass("popUpClosed");
			e.stopPropagation();
		});

		$("#close").click(function(e) {
			$("#popUp").addClass("popUpClosed");
		});

		$('#openSpeciesFilterButton').click(function(e) {
			e.stopPropagation();
			$('#speciesfilter').removeClass('filter_closed');
			$('#speciesfilter').addClass('filter_open');
		});

		$('#closeSpeciesFilterButton').click(function(e) {
			$('#speciesfilter').addClass('filter_closed');
			$('#speciesfilter').removeClass('filter_open');
		});

		$('#speciesfilter').click(function(e) {
			e.stopPropagation();
		});

		$("#popUp").click(function(e) {
			e.stopPropagation();
		});

		$(document).click(function(e) {
			$(':focus').blur();
			$('#speciesfilter').addClass('filter_closed');
			$('#speciesfilter').removeClass('filter_open');
			$("#popUp").addClass("popUpClosed");
		});
	</script>
</html>