<!DOCTYPE>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>AniSound Prototype 1.1</title>

    <style type="text/css">
      body {
		width: 100%;
		height: 100%;
        margin: 0;
        font-family: Arial;
        font-size: 16px;
      }

      #map {
		width: 100%;
		height: calc(100% - 52px);
      }
    </style>

    <script async defer
    	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhjEZgjkFvvD2Yvf099m5qtvipcm79ays&callback=initialize">
    </script>
    <script type="text/javascript" src="sampledata/data.json"></script>
    <script type="text/javascript" src="js/markerclusterer.js"></script>
    <script type="text/javascript" src="js/speciesfilter.js"></script>
    <script type="text/javascript" src="js/styledMap.js"></script>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" type="text/css" href="cs/style.css">
	<!-- Load an icon library to show a hamburger menu (bars) on small screens -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script type="text/javascript">
		function getMarkerIcon(species) {
			var canvas, context;
			var width = 50; var height = 50; var radius = 20;

			var color = getSpeciesColor(species);

			canvas = document.createElement("canvas");
			canvas.width = width;
			canvas.height = height;

			context = canvas.getContext("2d");
			context.clearRect(0, 0, width, height);
			context.fillStyle = "rgba(255, 255, 255, 1)";
			context.strokeStyle = color;

			context.beginPath();
			context.arc(width/2, height/2, radius, 0, 2*Math.PI);
			context.closePath();

			context.fill();
			context.lineWidth=3;
			context.stroke();
			return canvas.toDataURL();
		}

		function initialize() {
			document.getElementById("colordiv_birds").style.borderLeftColor = getSpeciesColor("birds");
			document.getElementById("colordiv_felines").style.borderLeftColor = getSpeciesColor("felines");
			document.getElementById("colordiv_primates").style.borderLeftColor = getSpeciesColor("primates");

			this.mapManager = new MapManager(getStyledMap());
		}

		function filter_clicked_birds(cb) {
			this.mapManager.filter_clicked_birds(cb);
		}
		function filter_clicked_felines(cb) {
			this.mapManager.filter_clicked_felines(cb);
		}
		function filter_clicked_primates(cb) {
			this.mapManager.filter_clicked_primates(cb);
		}

      	google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>
<body>
	<!-- Sidebar -->
	<div class="w3-sidebar w3-bar-block" id="speciesfilter">
		<button onclick="closeSpeciesFilter()" class="w3-bar-item w3-button w3-large">Close &times;</button>
		<div style="padding: 5px 30px">
			<div style="border-left: 6px solid black; padding: 0px 15px" id = colordiv_birds>
				<label for="cbx1" class="label-cbx">
					<input id="cbx1" type="checkbox" onclick="filter_clicked_birds(this)" class="invisible" checked>
					<div class="checkbox">
						<svg width="60px" height="60px" viewBox="0 0 20 20">
							<path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
							<polyline points="4 11 8 15 16 6"></polyline>
						</svg>
					</div>
					<div class="cbxlabel">Birds</div>
				</label>
			</div>
		</div>

		<div style="padding: 5px 30px">
			<div style="border-left: 6px solid black; padding: 0px 15px" id = colordiv_felines>
				<label for="cbx2" class="label-cbx">
					<input id="cbx2" type="checkbox" onclick="filter_clicked_felines(this)" class="invisible" checked>
					<div class="checkbox">
						<svg width="60px" height="60px" viewBox="0 0 20 20">
							<path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
							<polyline points="4 11 8 15 16 6"></polyline>
						</svg>
					</div>
					<div class="cbxlabel">Felines</div>
				</label>
			</div>
		</div>

		<div style="padding: 5px 30px">
			<div style="border-left: 6px solid black; padding: 0px 15px" id = colordiv_primates>
				<label for="cbx3" class="label-cbx">
					<input id="cbx3" type="checkbox" onclick="filter_clicked_primates(this)" class="invisible" checked>
					<div class="checkbox">
						<svg width="60px" height="60px" viewBox="0 0 20 20">
							<path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
							<polyline points="4 11 8 15 16 6"></polyline>
						</svg>
					</div>
					<div class="cbxlabel">Primates</div>
				</label>
			</div>
		  </div>
	</div>
	<div class="topnav" id="myTopnav">
		<a href="javascript:void(0);" class="icon" onclick="openSpeciesFilter(this)">
			<i class="fa fa-bars"></i>
			<span>Species filter</span>
		</a>
	</div>
	<div id="map"></div>
	</body>
</html>